<div class="task-form">
  <h3>Yeni Görev Ekle</h3>
  <input
    [(ngModel)]="taskTitle"
    placeholder="Başlık"
    class="form-control mb-2"
  />
  <textarea
    [(ngModel)]="taskDescription"
    placeholder="Açıklama"
    class="form-control mb-2"
  ></textarea>

  <!-- Buraya kategori seçme dropdown'u ekliyoruz -->
  <select [(ngModel)]="selectedCategory" class="form-select mt-3 mb-3">
    <option value="Tümü">Tümü</option>
    <option value="İş">İş</option>
    <option value="Okul">Okul</option>
    <option value="Kişisel">Kişisel</option>
    <option value="Diğer">Diğer</option>
  </select>

  <button (click)="addTask()" class="btn btn-success">Ekle</button>
</div>
>

<hr />

<button (click)="showTasks = !showTasks" class="btn btn-outline-primary mt-3">
  {{ showTasks ? "Görevleri Gizle" : "Görevleri Göster" }}
</button>

<div *ngIf="loading" class="mt-3">Görevler yükleniyor...</div>
<div *ngIf="error" class="alert alert-danger mt-3">{{ error }}</div>

<ul *ngIf="!loading && !error && showTasks" class="list-group mt-3">
  <li
    *ngFor="let task of filteredTasks"
    class="list-group-item d-flex justify-content-between align-items-start"
    [class.list-group-item-success]="task.completed"
  >
    <div>
      <input
        type="checkbox"
        [checked]="task.completed"
        (change)="toggleComplete(task)"
        class="form-check-input me-2"
      />
      <strong>{{ task.title }}</strong>
      <br />
      <small>{{ task.description }}</small>
      <br />
      <em>{{ task.category || "Kategori yok" }}</em>
    </div>
    <button (click)="deleteTask(task)" class="btn btn-danger btn-sm">
      Sil
    </button>
  </li>
</ul>
